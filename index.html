<!DOCTYPE html>
<html ng-app="clueApp">
    <head>
        <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
        <link rel="stylesheet" href="stylesheet.css">
        <link rel="stylesheet" href="bower_components/angular-busy/dist/angular-busy.css">
        
        
        <script src="bower_components/jquery/dist/jquery.js"></script>
        <script src="bower_components/angular/angular.js"></script>
        <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
        
        <script src="bower_components/angular-animate/angular-animate.js"></script>
        <script src="bower_components/angular-busy/dist/angular-busy.js"></script>
        
        <!-- Restangular -->
        <script src="bower_components/lodash/lodash.js"></script>
        <script src="bower_components/restangular/dist/restangular.js"></script>
        
        <!-- Source Scripts -->
        <script src="scripts/app.js"></script>
        <script src="scripts/gameboard.js"></script>
        <script src="scripts/client-services.js"></script>
        <script src="scripts/rest-services.js"></script>
        <script src="scripts/clue-controller.js"></script>
    </head>
<body ng-controller="clueCtrl as ctrl" cg-busy="{promise:ctrl.promise,templateUrl:ctrl.templateUrl,message:ctrl.message,
                   backdrop:ctrl.backdrop,delay:ctrl.delay,minDuration:ctrl.minDuration}">
    <!-- Debugging Toolbar -->
    <nav class="navbar navbar-default">
        <div class="container">
            <a class="navbar-brand" href="#">Debugging Header</a>
            <button type="button" class="btn btn-default navbar-btn" ng-click="ctrl.createGameBoard()">Create Game</button>
            <button type="button" class="btn btn-default navbar-btn" ng-click="ctrl.getPlayers()">Update Players</button>
            <button type="button" class="btn btn-default navbar-btn" ng-click="ctrl.getPlayerById()">Get My Player</button>
            <button type="button" class="btn btn-default navbar-btn" ng-click="ctrl.deleteGameBoard()">Delete Game</button>
            If game already started, delete & create a new one
        </div>
    </nav>
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <h1 class="text-center">ClueLess</h1>
            <h4 class="text-center">Game State: 
                <span ng-if="ctrl.game_board && !ctrl.gameStart" style="color:blue">Created</span>
                <span ng-if="ctrl.gameStart && !ctrl.joinedAfterStart" style="color:green">Started</span>
                <span ng-if="ctrl.gameStart && ctrl.joinedAfterStart" style="color:red">Already Started</span>
                <span ng-if="!ctrl.game_board" style="color:red">null</span>
            </h4>
            <button type="button" class="btn btn-success btn-xl btn-start" ng-if="!ctrl.game_board" ng-click="ctrl.createGameBoard()">New Game</button>
            <h4 class="text-center">{{ctrl.playerCount}}/6 players</h4>
        </div>
    </div>
    
    <!-- Pre-Game Setup -->
    <div class="row" ng-if="!ctrl.gameStart && ctrl.game_board">        
        <div class="col-md-6 col-md-offset-3">
            <div class="text-center">
                <h4 ng-if="ctrl.myPlayer==null">Select your character:</h4>
                <h4 ng-if="ctrl.myPlayer">Waiting on other players...</h4>
                <div class="btn-group" role="group" aria-label="...">
                    <button type="button" class="btn btn-default" ng-repeat="piece in ctrl.gamePieces"
                            ng-click="ctrl.pieceSelected(piece)" ng-disabled="piece.isTaken || ctrl.myPlayerAdded">
                        {{piece.name}}
                    </button>
                </div>
                <p ng-if="ctrl.playerCount<3" class="text-warning center-text">3 players are required to start, set to 1 for development</p>
                <button type="button" class="btn btn-success btn-xl btn-start" ng-if="ctrl.host" ng-click="ctrl.startGame()" 
                        ng-disabled="ctrl.playerCount<1">
                    Start Game
                </button>
            </div>
        </div>
    </div>
    
    <!-- Play Clue -->
    <div class="row" ng-if="ctrl.gameStart && !ctrl.joinedAfterStart"> 
        <div class="col-md-3 sidebar">
            <div style="float:right">
                <h3>{{ctrl.myPlayer}}</h3>
                <h4>My cards:</h4>
                <ul>
                    <li ng-repeat="card in ctrl.myCards">{{card.type}}: {{card.name}}</li>
                </ul>
                <h4>{{ctrl.curPlayer.board_piece.name}}'s Turn</h4>
                <ul>
                    <li class="legend" ng-repeat="player in ctrl.serverPlayers">
                        <div class="color-box" style="background:{{ctrl.playersColors[$index]}}"></div>
                        {{player.board_piece.name}}
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-6">
            <div class="text-center">
                <canvas gameboard id="myCanvas" players="ctrl.serverPlayers">
                    Your browser does not support the HTML5 canvas tag.
                </canvas>
                <div class="btn-toolbar center-toolbar" role="toolbar" aria-label="...">
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="button" class="btn btn-primary" ng-click="ctrl.makeMove('left')">
                            <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="ctrl.makeMove('right')">
                            <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="ctrl.makeMove('up')">
                            <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="ctrl.makeMove('down')">
                            <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                        </button>
                    </div>
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="button" class="btn btn-info">Suggestion</button>
                    </div>
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="button" class="btn btn-danger">Accusation</button>
                    </div>
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="button" class="btn btn-default">End Turn</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 sidebar" ng-if="ctrl.gameStart">
            <pre style="height:500px">Player actions go here:</pre>
        </div>
    </div>
</body>
</html>